version: 1.0
kind: boa_binding
id: boa_binding_finance

domain:
  name: finance
  ja: 金融
  en: Finance

purpose:
  - Stabilize Meaning under strict accountability
  - Prevent silent meaning drift across reporting boundaries

core_mapping:
  Fact:
    examples:
      - trade_execution_events
      - market_ticks
      - cash_ledger_entries
      - reference_data_snapshots
    invariants:
      - Append-only, immutable
      - Source timestamp + ingestion timestamp preserved
      - Corrections are new Facts (reversal/adjustment), not overwrite

  Meaning:
    examples:
      - pnl_calculation
      - risk_metrics_var_es
      - pricing_model_outputs
      - regulatory_classification
    rules:
      - Meaning must declare model/version and parameters
      - Multiple meanings may coexist (desk view vs regulatory view)

  Responsibility:
    owners:
      - risk_officer
      - compliance
      - product_owner
      - trading_desk_lead
    notes:
      - Final sign-off is always human-owned
      - Audit trail must link decisions to declared Resolution

boundaries:
  - name: execution_to_ledger
    description: Execution events become accounting facts (ledger postings)
    shifts:
      meaning: "trade semantics -> accounting semantics"
      responsibility: "trading -> finance/accounting"
      resolution: "posting rules and cutoff times are fixed here"

  - name: intraday_to_eod
    description: Intraday estimates become end-of-day official numbers
    shifts:
      meaning: "estimated -> official"
      responsibility: "analytics -> finance controller"
      resolution: "EOD cutoff + data completeness rules (RP interlock)"

  - name: internal_to_regulatory
    description: Internal metrics become externally reportable figures
    shifts:
      meaning: "business interpretation -> regulatory definition"
      responsibility: "product/org -> compliance"
      resolution: "regulatory definition version fixed per period"

resolution_contracts:
  - id: r_intraday_estimate
    applies_to: [pnl, risk_metrics_var_es]
    guarantees:
      - timeliness_over_completeness: true
      - known_missing_data_allowed: true
    requires_human_judgment:
      - "escalate if anomaly exceeds threshold"
      - "approve publication to internal stakeholders"

  - id: r_eod_official
    applies_to: [pnl, ledger, official_positions]
    guarantees:
      - completeness_over_timeliness: true
      - reconciliation_required: true
    requires_human_judgment:
      - "controller sign-off"
      - "exception handling and commentary"

ai_positioning:
  allowed:
    - explain discrepancies
    - suggest reconciliations
    - generate hypothesis for anomalies
  forbidden:
    - finalize official numbers
    - decide materiality
    - override cutoff rules

  idg_constraints:
    - "If market data is missing, AI must not infer prices (Detach)"
    - "AI confidence scores cannot substitute for Reconciliation"

failure_modes:
  - name: silent_model_drift
    symptom: "same KPI changes without declared model/version change"
    mitigation:
      - "Meaning must carry model/version fingerprint"
      - "Resolution gate blocks promotion to official"

  - name: responsibility_leakage
    symptom: "AI output treated as decision"
    mitigation:
      - "publish only Resolution outputs"
      - "require human sign-off record for r_eod_official"

binding_notes:
  - "Finance is boundary-rich: reporting boundaries are responsibility boundaries."
  - "Resolution is a contract, not accuracy: 'official' is a declared state."
